# Исправление проблемы с входом администратора

## ⚠️ ВАЖНО: Безопасность
После сброса пароля на значение по умолчанию **ОБЯЗАТЕЛЬНО** смените его на более безопасный через интерфейс администратора. Дефолтный пароль известен и должен использоваться только для первоначального входа или восстановления доступа.

## Проблема
При попытке входа с учетными данными `admin` / `12101991Qq!` на странице авторизации появляется ошибка "Неверные учетные данные".

## Причина
Учетные данные по умолчанию работают только при первом запуске системы, когда в базе данных нет пользователей с ролью admin. Если администратор уже был создан ранее, но пароль был изменен или повреждён, вход с дефолтными credentials не работает.

## Решение

### Вариант 1: Автоматический сброс (рекомендуется)
Запустите скрипт для сброса пароля администратора:

```bash
./scripts/reset_admin_password.sh
```

### Вариант 2: Через Docker
Если используете Docker:

```bash
# Зайдите в контейнер PostgreSQL
docker exec -it iiko-postgres psql -U iiko_user -d iiko_db

# Выполните SQL команды
DELETE FROM users WHERE username = 'admin';
INSERT INTO users (email, username, hashed_password, role, is_active, is_superuser)
VALUES (
    'admin@example.com',
    'admin',
    '$2b$12$y4QVNPhuZfpLp1.xM6.NSeDnpD6I/wm.dSOXGrxV.HtXj6izHJLPa',
    'admin',
    TRUE,
    TRUE
);
```

### Вариант 3: Использование SQL файла
```bash
psql -h localhost -U iiko_user -d iiko_db -f database/reset_admin.sql
```

### Вариант 4: Пересоздание базы данных
Если ничего не помогает, можно пересоздать базу данных:

```bash
# Остановите контейнеры
docker-compose down -v

# Запустите заново (база создастся с admin пользователем)
docker-compose up -d
```

## После сброса пароля
После выполнения любого из вариантов выше, вы сможете войти с учетными данными:
- **Логин**: `admin`
- **Пароль**: `12101991Qq!`

⚠️ **Важно**: После входа рекомендуется сменить пароль на более безопасный через интерфейс администратора.

## Обновление схемы базы данных
Начиная с этой версии, при инициализации новой базы данных администратор создается автоматически с указанными учетными данными. Это гарантирует, что вход всегда будет возможен после чистой установки.
