# üö® –ë–´–°–¢–†–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ù–ï –ú–û–ì–£ –í–û–ô–¢–ò –í –ê–î–ú–ò–ù–ö–£

## –ü–∏—à–µ—Ç "–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"? –í—ã–ø–æ–ª–Ω–∏—Ç–µ 3 –∫–æ–º–∞–Ω–¥—ã:

### 1Ô∏è‚É£ –ê–≤—Ç–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (30 —Å–µ–∫—É–Ω–¥)
```bash
cd /var/www/iiko-base
./scripts/diagnose_and_fix_admin.sh
```

### 2Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
```bash
# –î–ª—è systemd:
sudo systemctl restart iiko-backend

# –î–ª—è Docker:
docker-compose restart backend
```

### 3Ô∏è‚É£ –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É
- **–õ–æ–≥–∏–Ω:** `admin`
- **–ü–∞—Ä–æ–ª—å:** `12101991Qq!`

‚ö†Ô∏è **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞!**

---

## üîç –°–∫—Ä–∏–ø—Ç diagnose_and_fix_admin.sh –¥–µ–ª–∞–µ—Ç:

‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç PostgreSQL –∑–∞–ø—É—â–µ–Ω  
‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ  
‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ users —Å—É—â–µ—Å—Ç–≤—É–µ—Ç  
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–æ–Ω–∫–∏ role** (—Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)  
‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç  
‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin  
‚úÖ –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ö–µ—à –ø–∞—Ä–æ–ª—è –µ—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π  
‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç backend –∑–∞–ø—É—â–µ–Ω  
‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç API –Ω–∞–ø—Ä—è–º—É—é  
‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é .env —Ñ–∞–π–ª–æ–≤  

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã!**

---

## üìä –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑–∞–ª –æ—à–∏–±–∫–∏:

### ‚ùå PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω
```bash
sudo systemctl start postgresql
```

### ‚ùå Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω
```bash
# Systemd:
sudo systemctl start iiko-backend

# Docker:
docker-compose up -d backend
```

### ‚ùå –ù–µ—Ç —Ñ–∞–π–ª–∞ .env
```bash
# Backend:
cp backend/.env.example backend/.env

# Frontend:
cp frontend/.env.example frontend/.env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏ —É–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

---

## üÜò –ù–µ –ø–æ–º–æ–≥–ª–æ? –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

üìñ **[–ü–û–õ–ù–û–ï_–†–ï–®–ï–ù–ò–ï_–í–•–û–î–ê_–í_–ê–î–ú–ò–ù–ö–£.md](–ü–û–õ–ù–û–ï_–†–ï–®–ï–ù–ò–ï_–í–•–û–î–ê_–í_–ê–î–ú–ò–ù–ö–£.md)**

–¢–∞–º –æ–ø–∏—Å–∞–Ω—ã:
- –í—Å–µ 10 –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–∏—á–∏–Ω –ø—Ä–æ–±–ª–µ–º—ã
- –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–∂–¥–æ–π
- –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π
- –ö–∞–∫ —Å–æ–±—Ä–∞—Ç—å –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üß™ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é:
```bash
./scripts/check_admin_db.sh
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –Ω–∞–ø—Ä—è–º—É—é:
```bash
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"12101991Qq!"}'
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
```json
{"access_token": "eyJ...", "token_type": "bearer"}
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ backend:
```bash
# Systemd:
sudo journalctl -u iiko-backend -n 50

# Docker:
docker-compose logs backend --tail=50
```

---

## üí° –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–ª–æ–Ω–∫–∞ `role` | `./scripts/diagnose_and_fix_admin.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç |
| –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin | `./scripts/diagnose_and_fix_admin.sh` —Å–æ–∑–¥–∞—Å—Ç |
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ö–µ—à –ø–∞—Ä–æ–ª—è | `./scripts/diagnose_and_fix_admin.sh` –∏—Å–ø—Ä–∞–≤–∏—Ç |
| Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω | `sudo systemctl start iiko-backend` |
| PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω | `sudo systemctl start postgresql` |
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π .env | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ .env.example –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å |

---

## ‚öôÔ∏è –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

**Username:** `admin`  
**Password:** `12101991Qq!`  
**Email:** `admin@example.com`  

**–•–µ—à –ø–∞—Ä–æ–ª—è –≤ –±–∞–∑–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:**
```
$2b$12$y4QVNPhuZfpLp1.xM6.NSeDnpD6I/wm.dSOXGrxV.HtXj6izHJLPa
```

‚ö†Ô∏è **–ï—Å–ª–∏ —Ö–µ—à –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `\$` –≤–º–µ—Å—Ç–æ `$` - —ç—Ç–æ –æ—à–∏–±–∫–∞!**  
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç.

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—ã–≤–æ–¥:
   ```bash
   ./scripts/diagnose_and_fix_admin.sh > diagnostics.txt 2>&1
   ```

2. –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏:
   ```bash
   sudo journalctl -u iiko-backend -n 100 > backend.log
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub —Å —Ñ–∞–π–ª–∞–º–∏ diagnostics.txt –∏ backend.log

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2026-02-09  
**–ê–≤—Ç–æ—Ä:** dovezukatmn
